var StyleListener=(function(){function a(b){if(typeof b==="undefined"){b={}}this.isPolling=false;this.pollFreq=250;this.elementId="";this.trigger={};this.callback=function(){};if(typeof b.pollFreq==="number"&&b.pollFreq>0){this.pollFreq=b.pollFreq}if(typeof b.elementId==="string"){this.elementId=b.elementId}if(typeof b.trigger==="object"){this.trigger=b.trigger}if(typeof b.callback==="function"){this.callback=b.callback}}a.prototype.init=function(){var b=this;if(b.isValid()){b.sanitize();if(b.getElement().addEventListener){b.getElement().addEventListener("DOMAttrModified",function(c){b.listen(c)},false)}else{b.isPolling=true;b.poll()}}};a.prototype.sanitize=function(){var c=this;var b=c.trigger;c.trigger={};for(prop in b){c.trigger[prop.toLowerCase()]=(typeof b[prop]==="string"?b[prop].toLowerCase():b[prop])}};a.prototype.poll=function(){var b=this;setTimeout(function(){if(b.getElement()){b.checkStyle(b.getElement().getAttribute("style"))}},b.pollFreq)};a.prototype.listen=function(b){var c=this;if(b.attrName==="style"){c.checkStyle(b.newValue)}};a.prototype.checkStyle=function(d){var e=this;var c=e.buildStyleFromString(d);var b=true;for(prop in e.trigger){b=b&&(typeof c[prop]!=="undefined"&&c[prop]==e.trigger[prop])}if(b){e.callback()}else{if(e.isPolling){e.poll()}}};a.prototype.isValid=function(){var b=this;return(b.getElement()&&typeof b.trigger==="object"&&typeof b.callback==="function"&&(typeof b.pollFreq==="number"&&b.pollFreq>0))};a.prototype.buildStyleFromString=function(b){var c={};var f=b.split(";");for(i in f){var e=f[i];var d=e.split(":");if(d.length==2){for(j in d){d[j]=d[j].replace(/^\s+|\s+$/g,"").toLowerCase()}c[d[0]]=d[1]}}return c};a.prototype.getElement=function(){var b=this;return document.getElementById(b.elementId)};return a})();